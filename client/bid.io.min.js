(function(){function b(a){return b.enabled(a)?function(c){var d=new Date,e=d-(b[a]||d);b[a]=d,c=a+" "+c+" +"+b.humanize(e),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function c(b,d){var e=c.resolve(b),f=c.modules[e];if(!f)throw new Error('failed to require "'+b+'" from '+d);return f.exports||(f.exports={},f.call(f.exports,f,f.exports,c.relative(e),a)),f.exports}var a=this;b.names=[],b.skips=[],b.enable=function(a){localStorage.debug=a;var c=(a||"").split(/[\s,]+/),d=c.length;for(var e=0;e<d;e++)a=c[e].replace("*",".*?"),a[0]==="-"?b.skips.push(new RegExp("^"+a.substr(1)+"$")):b.names.push(new RegExp("^"+a+"$"))},b.disable=function(){b.enable("")},b.humanize=function(a){var b=1e3,c=6e4,d=60*c;return a>=d?(a/d).toFixed(1)+"h":a>=c?(a/c).toFixed(1)+"m":a>=b?(a/b|0)+"s":a+"ms"},b.enabled=function(a){for(var c=0,d=b.skips.length;c<d;c++)if(b.skips[c].test(a))return!1;for(var c=0,d=b.names.length;c<d;c++)if(b.names[c].test(a))return!0;return!1},window.localStorage&&b.enable(localStorage.debug),c.modules={},c.resolve=function(a){var b=a,d=a+".js",e=a+"/index.js";return c.modules[d]&&d||c.modules[e]&&e||b},c.register=function(a,b){c.modules[a]=b},c.relative=function(a){return function(d){if("debug"==d)return b;if("."!=d.charAt(0))return c(d);var e=a.split("/"),f=d.split("/");e.pop();for(var g=0;g<f.length;g++){var h=f[g];".."==h?e.pop():"."!=h&&e.push(h)}return c(e.join("/"),a)}},c.register("channel.js",function(a,b,c,d){function l(a,b){this.io=b.io,this.opts=b.opts,this.url=b.url,this.ns=b.ns||"stream",this.name=a,this.watches={},this.evts={},this.actions=["fetch","query","lock","unlock","pending","complete","error","update"],this.events=["message","close","connect","connecting","connect_failed","reconnect","reconnecting","reconnect_failed","disconnect"],this.connect()}var e=c("./events").EventEmitter,f=c("debug")("bid.io-client:channel"),g=c("./parser"),h=c("./url"),i=g.encode,j=g.decode,k=g.packets;a.exports=l,l.prototype.__proto__=e.prototype,l.prototype.connect=function(){var a=this.buildUrl(this.name);this.socket=this.io.connect(a,this.opts);for(var b=0,c;c=this.events[b];b++)this.bind(c);return this},l.prototype.disconnect=function(){for(var a=0,b;b=this.events[a];a++)this.unbind(b),this.socket.disconnect();return this},l.prototype.bind=function(a){var b=this;return this.evts[a]=function(){var c=Array.prototype.slice.call(arguments);b.emit.apply(b,[a].concat(c))},b.socket.on(a,this.evts[a]),this},l.prototype.unbind=function(a){return this.socket.removeListener(a,this.evts[a]),this},l.prototype.fetch=function(a,b){return this.send("fetch",a,b)},l.prototype.find=function(a,b){return this.send("query","",a,b)},l.prototype.open=function(a,b,c){return this.send("lock",a,b,c)},l.prototype.cancel=function(a,b,c){return this.send("unlock",a,b,c)},l.prototype.claim=function(a,b,c){return this.send("claim",a,b,c)},l.prototype.pending=function(a,b,c){return this.send("pending",a,b,c)},l.prototype.complete=function(a,b,c){return this.send("complete",a,b,c)},l.prototype.forceunlock=function(a,b,c){return this.send("forceunlock",a,b,c)},l.prototype.update=function(a,b,c){return this.send("update",a,b,c)},l.prototype.watch=function(a,b,c){"function"==typeof a?(c=a,b="*",a=null):~this.actions.indexOf(a)?(c=b,b=a,a=null):"function"==typeof b&&(c=b,b="*");var d=this,e=[].slice.apply(arguments),f=function(a){return b=b.toString(),~b.indexOf(a)};if(d.watches[a||this.name])return this;var g=function(b){var d=j(b),e=d.id,g=d.type,h=g,i=f(h),k=a&&e==a,l=a&&e!=a;if(l)return;if(k&&i||k&&f("*")||!a&&i||f("*"))return c(d.data,h)};return d.watches[a||this.name]=g,d.socket.on(this.ns,g),this},l.prototype.unwatch=function(a){var b=this.watches[a||this.name];return b&&(this.socket.removeListener(this.ns,b),delete this.watches[a],console.log("unwatching bid: ",a,"actions: ",actions)),this},l.prototype.send=function(a,b,c,d){var e;"function"==typeof c&&(d=c,c=null),e="query"===a?{query:c}:"update"===a?{update:c}:{owner:c};var f=i({type:a,id:b,data:e});return this.request(f,d),this},l.prototype.request=function(a,b){return this.socket.emit(this.ns,a,this.response(b)),this},l.prototype.response=function(a){return function(b){var c=j(b);"error"==c.type?a&&a(c.data):a&&a(null,c.data)}},l.prototype.buildUrl=function(a,b){var c=h.parse(b||this.url);return[c.protocol,"://",c.authority,c.path,"/",a,"?",c.query].join("")}}),c.register("events.js",function(a,b,c,d){function e(){}function f(a){return"[object Array]"===Object.prototype.toString.call(a)}b.EventEmitter=e,e.prototype.on=function(a,b){return this.$events||(this.$events={}),this.$events[a]?f(this.$events[a])?this.$events[a].push(b):this.$events[a]=[this.$events[a],b]:this.$events[a]=b,this},e.prototype.addListener=e.prototype.on,e.prototype.once=function(a,b){function d(){c.removeListener(a,d),b.apply(this,arguments)}var c=this;return d.listener=b,this.on(a,d),this},e.prototype.removeListener=function(a,b){if(this.$events&&this.$events[a]){var c=this.$events[a];if(f(c)){var d=-1;for(var e=0,g=c.length;e<g;e++)if(c[e]===b||c[e].listener&&c[e].listener===b){d=e;break}if(d<0)return this;c.splice(d,1),c.length||delete this.$events[a]}else(c===b||c.listener&&c.listener===b)&&delete this.$events[a]}return this},e.prototype.removeAllListeners=function(a){return a===undefined?(this.$events={},this):(this.$events&&this.$events[a]&&(this.$events[a]=null),this)},e.prototype.listeners=function(a){return this.$events||(this.$events={}),this.$events[a]||(this.$events[a]=[]),f(this.$events[a])||(this.$events[a]=[this.$events[a]]),this.$events[a]},e.prototype.emit=function(a){if(!this.$events)return!1;var b=this.$events[a];if(!b)return!1;var c=Array.prototype.slice.call(arguments,1);if("function"==typeof b)b.apply(this,c);else{if(!f(b))return!1;var d=b.slice();for(var e=0,g=d.length;e<g;e++)d[e].apply(this,c)}return!0}}),c.register("index.js",function(a,b,c,d){function h(a,b,c){c=c||{};if(!a.protocol||!a.connect)throw Error("Please include socket.io client.");return new e(a,b,c)}var e=c("./manager"),f=c("./channel"),g=c("./parser");a.exports=b=h,b.protocol=g.protocol,b.Manager=e,b.Channel=f}),c.register("manager.js",function(a,b,c,d){function h(a,b,c){c=c||{},this.url=b,this.io=a,this.opts=c,this.chnls={}}var e=c("./channel"),f=c("debug")("bid.io-client:manager"),g="force new connection";a.exports=h,h.prototype.connect=function(a,b){return"string"!=typeof a&&(b=a,a=null),a=a||this.url,this.io.connect(a,b)},h.prototype.join=function(a,b){b=b||{},f("joining channel %s",a);var c=b[g],d=this.chnls[a];return c&&(this.opts[g]=c),d&&!c?d:(d=new e(a,this),this.chnls[a]=d,this.chnls[a])},h.prototype.leave=function(a){var b=this.chnls[a];return b?(f("disconnecting from channel %s",a),b.disconnect(),delete this.chnls[a]):f("unable to find channel %s",a),this},h.prototype.getChannel=function(a){var b=this.chnls[a];return b?b:f("Channel '%s' doesn't exist.",a)}}),c.register("parser.js",function(a,b,c,d){function i(a){if(Object.keys)return Object.keys(a);var b=[],c=Object.prototype.hasOwnProperty;for(var d in a)c.call(a,d)&&b.push(d);return b}var e=c("debug")("bid.io-parser");b.protocol=1;var f=b.packets={fetch:0,query:1,lock:2,unlock:3,pending:4,complete:5,claim:6,forceunlock:7,error:8,update:9},g=b.packetslist=i(f),h={type:"error",data:"parser error"};b.encode=function(a){var b="";return b+=f[a.type],null!=a.id&&(b+=a.id),null!=a.data&&(b+=JSON.stringify(a.data)),e("encoded %j as %s",a,b),b},b.decode=function(a){var b={},c=0;if(null==a)return h;b.type=g[Number(a.charAt(0))];if(null==b.type)return h;var d=a.charAt(c+1);if(""!=d&&Number(d)==d){b.id="";while(++c){var f=a.charAt(c);if(null==f||Number(f)!=f){--c;break}b.id+=a.charAt(c);if(c+1==a.length)break}}if(a.charAt(++c))try{b.data=JSON.parse(a.substr(c))}catch(i){return h}return e("decoded %s as %j",a,b),b}}),c.register("url.js",function(a,b,c,d){function g(a){var b=e.exec(a||""),c={},d=14;while(d--)c[f[d]]=b[d]||"";return c}b.parse=g;var e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,f=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"]});var d=c("index.js");"undefined"!=typeof module?module.exports=d:bio=d})();