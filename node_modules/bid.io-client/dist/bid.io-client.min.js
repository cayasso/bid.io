(function(){function b(a){return b.enabled(a)?function(c){var d=new Date,e=d-(b[a]||d);b[a]=d,c=a+" "+c+" +"+b.humanize(e),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function c(b,d){var e=c.resolve(b),f=c.modules[e];if(!f)throw new Error('failed to require "'+b+'" from '+d);return f.exports||(f.exports={},f.call(f.exports,f,f.exports,c.relative(e),a)),f.exports}var a=this;b.names=[],b.skips=[],b.enable=function(a){localStorage.debug=a;var c=(a||"").split(/[\s,]+/),d=c.length;for(var e=0;e<d;e++)a=c[e].replace("*",".*?"),a[0]==="-"?b.skips.push(new RegExp("^"+a.substr(1)+"$")):b.names.push(new RegExp("^"+a+"$"))},b.disable=function(){b.enable("")},b.humanize=function(a){var b=1e3,c=6e4,d=60*c;return a>=d?(a/d).toFixed(1)+"h":a>=c?(a/c).toFixed(1)+"m":a>=b?(a/b|0)+"s":a+"ms"},b.enabled=function(a){for(var c=0,d=b.skips.length;c<d;c++)if(b.skips[c].test(a))return!1;for(var c=0,d=b.names.length;c<d;c++)if(b.names[c].test(a))return!0;return!1},window.localStorage&&b.enable(localStorage.debug),c.modules={},c.resolve=function(a){var b=a,d=a+".js",e=a+"/index.js";return c.modules[d]&&d||c.modules[e]&&e||b},c.register=function(a,b){c.modules[a]=b},c.relative=function(a){return function(d){if("debug"==d)return b;if("."!=d.charAt(0))return c(d);var e=a.split("/"),f=d.split("/");e.pop();for(var g=0;g<f.length;g++){var h=f[g];".."==h?e.pop():"."!=h&&e.push(h)}return c(e.join("/"),a)}},c.register("channel.js",function(a,b,c,d){function i(a,b,c){this.opts=b.opts,this.io=b.io,this.url=b.url,this.ns=b.ns||"stream",this.name=a,this.watches={},this.actions=["join","leave","fetch","lock","unlock","complete","error"],this.connect(c)}var e=c("debug")("bid.io-client:channel"),f=c("./parser"),g=f.encode,h=f.decode;a.exports=i,i.prototype.connect=function(a){var b=this;return this.socket=this.io.connect(b.url+"/"+b.name,b.opts),this.socket.on("connect",function(){a&&a(b)}),this},i.prototype.fetch=function(a,b){this.send(f.FETCH,a,b)},i.prototype.open=function(a,b,c){return this.send(f.LOCK,a,b,c),this},i.prototype.cancel=function(a,b,c){return this.send(f.UNLOCK,a,b,c),this},i.prototype.complete=function(a,b,c){return this.send(f.COMPLETE,a,b,c),this},i.prototype.watch=function(a,b,c){"function"==typeof a?(c=a,b="*",a=null):~this.actions.indexOf(a)?(c=b,b=a,a=null):"function"==typeof b&&(c=b,b="*");var d=this,e=[].slice.apply(arguments),g=function(a){return b=b.toString(),a=a.toLowerCase(),~b.indexOf(a)};return d.watches[a]=function(d){var e=h(d),i=e.id,j=e.type,k=f.types[j],l=g(k);if(a&&i==a&&l)return c(e.data,k);if(a&&i==a&&g("*"))return c(e.data,k);if(a&&i!=a)return;if(!a&&l||g("*"))return c(e.data,k)},d.socket.on(this.ns,d.watches[a]),this},i.prototype.unwatch=function(a){var b=this.watches[a];return b&&(this.socket.removeListener(this.ns,b),delete this.watches[a],console.log("unwatching bid: ",a,"actions: ",actions)),this},i.prototype.send=function(a,b,c,d){"function"==typeof c&&(d=c,c=null);var e={owner:c},i=g({type:a,id:b,data:e});this.socket.emit(this.ns,i,function(a){var b=h(a);f.ERROR===b.type?d&&d(b.data):d&&d(null,b.data)})}}),c.register("index.js",function(a,b,c,d){function h(a,b){return b=b||{},io="undefined"!=typeof eio?eio:io,new e(a,b)}var e=c("./manager"),f=c("./channel"),g=c("./parser");a.exports=b=h,b.protocol=g.protocol,b.Manager=e,b.Socket=f}),c.register("manager.js",function(a,b,c,d){function g(a,b){b=b||{},this.url=a,this.io=io,this.opts=b,this.chnls={}}var e=c("./channel"),f=c("debug")("bid.io-client:manager");if("undefined"==typeof eio&&"undefined"==typeof io)throw Error("Please include socket.io client.");a.exports=g,g.prototype.join=function(a,b){f("joining channel %s",a);var c=new e(a,this,b);return this.chnls[a]=c,this.chnls[a]},g.prototype.leave=function(a){var b=this.chnls[a];return b?(f("disconnecting from channel %s",a),b.disconnect(),delete this.chnls[a]):f("unable to find channel %s",a),this}}),c.register("parser.js",function(a,b,c,d){function f(a){return{type:b.ERROR,message:"parser error"}}var e=c("debug")("bid.io-parser");b.protocol=1,b.types=["JOIN","LEAVE","FETCH","LOCK","UNLOCK","COMPLETE","ERROR"],b.JOIN=0,b.LEAVE=1,b.FETCH=2,b.LOCK=3,b.UNLOCK=4,b.COMPLETE=5,b.ERROR=6,b.encode=function(a){var b="";return b+=a.type,null!=a.id&&(b+=a.id),null!=a.data&&(b+=JSON.stringify(a.data)),e("encoded %j as %s",a,b),b},b.decode=function(a){var c={},d=0,g=0;c.type=Number(a.charAt(0));if(null==b.types[c.type])return f();var h=a.charAt(d+1);if(""!=h&&Number(h)==h){c.id="";while(++d){var i=a.charAt(d);if(null==i||Number(i)!=i){--d;break}c.id+=a.charAt(d);if(d+1==a.length)break}}if(a.charAt(++d))try{c.data=JSON.parse(a.substr(d))}catch(j){return console.log(j),f(j)}return e("decoded %s as %j",a,c),c}});var d=c("index.js");"undefined"!=typeof module?module.exports=d:bio=d})();